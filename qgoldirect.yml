openapi: 3.0.0
info:
  title: QGen Direct (Arritech's QGen Online API)
  version: '1.0.0'
  description: |
    This API enables Arritech clients to integrate their systems with QGen Online to access our services.
    It is written supporting the openAPI standards and all data returned is in JSON format. 
    
    Requests should be directed to the appropriate API URL 
    - Staging: https://qgenonlinestaging.com/integration-api/
    - Production: Contact Arritech for details
    
    All API requests must be made over HTTPS. HTTP is not supported! 
    See the authentication section for information on correctly authenticating calls 
    to the QGen Direct API.
    For any queries please contact: support@qgengroup.com
    
    # Generate API Key
    
    Login to qgenonline.com with a user that has credentials to generate API keys. In the **Settings** menu 
    you will find the **Generate API key** sub menu. Click on it and fill in the form.
    For security reasons, we recommend you specify the IP address of your client accessing our API. If left 
    empty, IP whitelisting is disabled, meaning that all IPs will have access to the API.
    
    # How to use the API explorer
    
    This page allows you to test the APIs directly without any coding. It's great to test some examples and
    make sure your keys are working and the servers are connected. Start by clicking the 
    **Try it out** button in the Login section. This will allow you to edit the body parameters with your
    clientID and secret Key as generated from QGen Online page.
    
    From the response, cut the access_token value (whatever is inside the quotations) and paste it in the 
    **value** field shown when you press the **Authorize** button shown here.
    
    You can then press the **Try it now** buttons on the other endpoints, edit the values of the fields in
    the *Body*  and press **Execute**
  
  
    
    
  termsOfService: 'https://arritech.com'
  contact:
    name: API Dev Team
    email: support@arritech.com
    url: 'https://arritech.com/contact/'
  license:
    name: Arritech Agreement
    url: 'https://arritech.com'
    


servers:
  - url: https://qgenonlinestaging.com/integration-api
    description: Staging server


components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        ## Security Scheme: JWT Bearer Token
        
        This API uses JWT (JSON Web Token) for authentication and authorization.
        
        ### Generating a Token
        
        After successful login through the `/v1/public/login` endpoint, a JWT token is returned in the response. This token must be included in the `Authorization` header for all other secure endpoints.
        
        ### Storing the Token
        
        **Important:** It's crucial to securely store the JWT token on the client-side to prevent unauthorized access. We recommend encrypting the token and storing it in a secure storage solution. 
        
        ### Transmitting the Token
        
        **All API requests must be made over HTTPS.** Tokens should never be transmitted over a non-secure connection.
        
        ### Token Expiry
        
        Tokens are short-lived and should be regenerated before expiry. The expiry time is included in the login response.
        
        ### Sample Header
        
        ```http
        Authorization: Bearer YOUR_JWT_TOKEN_HERE
        ```
          securitySchemes:
  schemas:
    RiskLevel: 
      type: object
      properties: 
        id: 
          type: string
        name:
          type: string
        
    CaseType:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        group:
          type: string
        riskLevel:
           $ref: '#/components/schemas/RiskLevel'

    BaseEvent:
      type: "object"
      description: "Base structure for all webhook events."
      properties:
        id:
          type: "string"
          description: "Unique ID for the webhook event."
        merchantID:
          type: "string"
          description: "This is your merchant identifier. It's your unique identifier across other QGen Online Merchants and never changes"
        eventType:
          type: "string"
          description: | 
            This can only be one of the events described below 
            and will indicate the structure to expect in the next field labelled 'payload'.
            Expect a string as follows e.g. 'cfm_case_created_event' or
            'cfm_entity_rejected_terms_event' 
        payload:
          type: "object"
          description: "Event-specific data payload as per details described below."

    cfm_case_created_event:
      type: "object"
      properties:
        caseID:
          type: "string"
          description: "ID of the case."
        caseTypeID:
          type: "string"
          description: "Type ID of the case."
        entityID:
          type: "string"
          description: "ID of the associated entity."
        journeyID:
          type: "string"
          description: "ID of the journey associated with the case."
        locale:
          type: "string"
          description: "Language/locale setting for the case."
        merchantID:
          type: "string"
          description: "ID of the merchant involved."
        referenceID:
          type: "string"
          description: "Reference ID associated with the case."
        riskLevelID:
          type: "string"
          description: "Risk level ID assigned to the case."
        sessionID:
          type: "string"
          description: "Session ID associated with the case."

    cfm_entity_rejected_terms_event:
      type: "object"
      properties:
        caseID:
          type: "string"
          description: "ID of the case."
        caseTypeID:
          type: "string"
          description: "Type ID of the case."
        entityID:
          type: "string"
          description: "ID of the associated entity."
        journeyID:
          type: "string"
          description: "ID of the journey associated with the case."
        locale:
          type: "string"
          description: "Language/locale setting for the case."
        merchantID:
          type: "string"
          description: "ID of the merchant involved."
        referenceID:
          type: "string"
          description: "Reference ID associated with the case."
        riskLevelID:
          type: "string"
          description: "Risk level ID assigned to the case."
        sessionID:
          type: "string"
          description: "Session ID associated with the case."

    cfm_user_geo_blocked_event:
      type: "object"
      properties:
        merchantID:
          type: "string"
          description: "ID of the merchant involved."
        referenceID:
          type: "string"
          description: "Reference ID associated with the event."
        riskLevelID:
          type: "string"
          description: "Risk level ID assigned to the event."
        journeyID:
          type: "string"
          description: "ID of the journey associated with the case."
        IPAddress:
          type: "string"
          description: "IP address involved in the event."
        IPDetails:
          type: "object"
          properties:
            ip:
              type: "string"
              description: "IP address string."
            continentcode:
              type: "string"
              description: "Continent code derived from IP."
            continentname:
              type: "string"
              description: "Continent name derived from IP."
            countrycode:
              type: "string"
              description: "Country code derived from IP."
            countryname:
              type: "string"
              description: "Country name derived from IP."
            regioncode:
              type: "string"
              description: "Region code derived from IP."
            city:
              type: "string"
              description: "City derived from IP."
            sessionID:
              type: "string"
              description: "Session ID associated with the event."
    
    cfm_journey_completed_event:
      type: "object"
      properties:
        acceptanceInfo:
          type: "object"
          description: "Details of acceptance information."
          properties:
            deviceIP:
              type: "string"
              description: "IP address of the device."
            deviceInfo:
              type: "string"
              description: "Information about the device and browser used."
            id:
              type: "string"
              description: "ID of the acceptance event."
            timestamp:
              type: "string"
              format: "date-time"
              description: "Timestamp of the journey start."
            version:
              type: "string"
              description: "Version of the Terms and Conditions"
        caseID:
          type: "string"
          description: "ID of the case."
        caseTypeID:
          type: "string"
          description: "Type ID of the case."
        entityID:
          type: "string"
          description: "ID of the associated entity."
        journeyID:
          type: "string"
          description: "ID of the journey associated with the case."
        locale:
          type: "string"
          description: "Language setting for the case if selected by the user. EN is default"
        merchantID:
          type: "string"
          description: "This is your merchant identifier. It's your unique identifier across other QGen Online Merchants and never changes."
        referenceID:
          type: "string"
          description: "Reference ID associated with the case. You should send this. Make sure it is unique."
        riskLevelID:
          type: "string"
          description: "Risk level ID assigned to the case."
        sessionID:
          type: "string"
          description: "Session ID associated with the case. A session has a time-out."
        steps:
          type: "array"
          description: "List of steps in the journey as defined in the Risk settings."
          items:
            type: "object"
            properties:
              checkName:
                type: "string"
                description: "Name of the check step."
              checkType:
                type: "string"
                description: "Type of the check step. e.g. Identity Documents"
              completed:
                type: "boolean"
                description: "Truq if the step has been completed. False otherwise."
              completedAt:
                type: "string"
                format: "date-time"
                description: "Time when the step was completed."
              data:
                type: "object"
                properties:
                  candidate:
                    type: "object"
                    properties:
                      documentCountryCode:
                        type: "string"
                        description: "Country code of the document. e.g. MT"
                      documentCountryName:
                        type: "string"
                        description: "Country name of the document. e.g. Malta"
                      documentDescription:
                        type: "string"
                        description: "Description of the document. e.g. Identity Card"
                      documentName:
                        type: "string"
                        description: "Name of the document."
                      documentTypeDetail:
                        type: "string"
                        description: "Type detail of the document."
                      probability:
                        type: "number"
                        description: "Probability of the document that it's what we indicate it to be."
                  documentType:
                    type: "string"
                    description: "Type of the document."
                  documents:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        fileName:
                          type: "string"
                          description: "Name of the file associated with the document."
                        isUpload:
                          type: "boolean"
                          description: "True if the document was uploaded."
                        side:
                          type: "string"
                          description: "Side of the document. Front or Back"
                        size:
                          type: "integer"
                          description: "Size of the document file in bytes."
                  documentsSize:
                    type: "integer"
                    description: "Total size of all documents in bytes."
                  fastFail:
                    type: "boolean"
                    description: "Whether the step had fast fail logic implemented."
                  numberOfDocuments:
                    type: "integer"
                    description: "Number of documents involved in the step."
              deviceIP:
                type: "string"
                description: "IP address of the device used in the step."
              deviceInfo:
                type: "string"
                description: "Information about the device and browser used."
              documents:
                type: "array"
                items:
                  type: "string"
              faceLiveness:
                type: "object"
                properties:
                  UUID:
                    type: "string"
                    description: "UUID of the face liveness check."
                  completed:
                    type: "boolean"
                    description: "Whether the face liveness check is completed."
                  createdBy:
                    type: "object"
                    properties:
                      actorId:
                        type: "string"
                        description: "ID of the actor initiating the face liveness check."
                      actorType:
                        type: "string"
                        description: "Type of the actor initiating the face liveness check."
                      timestamp:
                        type: "string"
                        format: "date-time"
                        description: "Timestamp of the actor's action."
                  response:
                    type: "object"
                    properties:
                      capture_liveness:
                        type: "object"
                        properties:
                          probability:
                            type: "number"
                            description: "Probability score for the capture liveness."
                          score:
                            type: "number"
                            description: "Score for the capture liveness."
                      face_liveness:
                        type: "object"
                        properties:
                          probability:
                            type: "number"
                            description: "Probability score for the face liveness."
                  revisionID:
                    type: "integer"


                    description: "Revision ID of the face liveness response."
              stepNo:
                type: "integer"
                description: "Step number in the journey sequence."


tags:
  - name: authentication
  - name: aml

paths:
  /v1/public/login:
    post:
      tags:
        - authentication
      summary: login
      description: |
        You should have already generated an access key pair via QGen Online Dev tools section.
        If not, Login to QGen Online using your admin user credentials, and access the Dev tools 
        to generate an API key. You can generate multiple keys for both
        the staging or production environments. Multiple keys are uniquely
        identified by a unique key identifier called ClientID.
        This 'Login' endpoint converts your clientID/secretkey pair, if validated, into
        a JWT session token to use during your other API calls. You can call this more than one 
        time during a session to make sure it does not expire. So check the expiry time 
        provided with the token in the response and make sure to generate a new token before the time is up. 
        Parameters required:
        - clientID
        - apikey
      security: []
      requestBody:
        description: Send the clientID and respective secret API key as generated in QGenOnline
        content:
          application/json:
            schema:
              type: object
              properties:
                clientID:
                  type: string
                  description: ClientID that matches the secret key
                clientSecret:
                  type: string
                  description: Secret key
              
              example:
                clientID: client_unique_id
                clientSecret: client_secret
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: True if the token was generated successfully. False otherwise
                  data:
                    type: object
                    description: In case of an error, this object will be set to 'null'
                    properties:
                      access_token:
                        type: string
                        description: The temporary JWT token to use in all subsequent calls
                      expires: 
                        type: integer
                        format: date-time
                        description: expiry date and time of the token
                  errors:
                    type: object
                    description: Array of error object types. If the request was successful, this object will be set to 'null'
                    properties: 
                      code:
                        type: integer
                        description: The HTML error reason code. Includes 400 (bad request), 401 (Unauthorized)
                      message:
                        type: string
                        description: A descriptive message describing the reason for the error
                      type:
                        type: string
                        description: Error types such as "BAD_REQUEST_ERROR", "UNAUTHORIZED_ERROR"
              example:
                success: true
                data:
                  access_token: |
                    eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJjbGFpbXMiOlsiQ29tcGx5IiwiQU1MIl0sImNsaWVudF9pZCI6IjYzZjM4NWI2OTQwY2JmYzYx
                    ZjYxM2Q1NCIsImV4cCI6MTY3NjkxNDg2NywiaXNzIjoiUWdlbkFwaSIsIm1lcmNoYW50X2lkIjoiNWVkZTE3OTUxMTExZmMyNGQ4OWJiYTdiIiwibW
                    VyY2hhbnRfbmFtZSI6Iktub3cgTWUgTm93Iiwib3JpZ19pYXQiOjE2NzY5MDc2NjcsInVzZXJuYW1lIjoiZ29kd2luLnNjaGVt
                    YnJpQGtub3dtZW5vdy5jb20ifQ.ozzW9BCFPicR93t_zOJTwn3vaHc8-ibiQbYqZVlPi7AoUw9skC0QL6dgxkVqQGxQ2on8arR_NiaaIR8JxelcGS
                  expires: 2023-02-20T17:41:07.725270578Z
                errors: null

        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: False in case of a bad request
                  data:
                    type: object
                    description: In case of an error, this object will be set to 'null'
                  errors:
                    type: object
                    description: Array of error object types.
                    properties: 
                      code:
                        type: integer
                        description: Bad request error
                      message:
                        type: string
                        description: A descriptive message describing the reason for the error
                      type:
                        type: string
                        description: "BAD_REQUEST_ERROR"
              example:
                success: false
                data: null
                errors: 
                  code: 400
                  message: "invalid character '\\n' in string literal"
                  type: BAD_REQUEST_ERROR

        '401':
          description: Unauthorized, check your token if still valid. It may have expired.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: False in case of a bad request
                  data:
                    type: object
                    description: In case of an error, this object will be set to 'null'
                  errors:
                    type: object
                    description: Array of error object types.
                    properties: 
                      code:
                        type: integer
                        description: Bad request error
                      message:
                        type: string
                        description: A descriptive message describing the reason for the error
                      type:
                        type: string
                        description: "UNAUTHORIZED_ERROR"
              example:
                success: false
                data: null
                errors: 
                  code: 401
                  message: "invalid token secret"
                  type: UNAUTHORIZED_ERROR

  /v1/aml/search:
    post:
      tags:
        - aml
      summary: Search
      description: |
        Creates a new search by sending search terms, parameters and filters. This endpoint can be used to 
        instantly know if the entity has any potential hits. If there are no hits, the endpoint returns 'No Match' 
        and a 0 value in the totalHits. This allows you to instantly onboard a customer. If this search
        return 'potential match' plus a value which is higher than 1 in the totalHits field, you can suspend the 
        onboarding process until you review the hits on qgenonline.com using the returned ID to filter 
        the results.
      security:
        - bearerAuth: []        
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                searchTerm:
                  type: string
                  description: The name of the entity. Can be a person or a company
                filters:
                  type: object
                  properties:
                    birthYear:
                      type: integer
                      description: The year of birth of the person if known. Leave empty if the entity is a company
                    countryCodes: 
                      description: | 
                                      Results are filtered by the entity nationality or 
                                      country of residence. An array of ISO 3166-1 alpha-2 strings 
                      type: array
                      items: 
                        type: string
                    types:
                      description: |  
                                      These types are used within the search to refine 
                                      the result set. There is an extensive range of 
                                      filters available - use of the filters is entirely 
                                      optional. The example shows how the filters should 
                                      be included in your request. You must send a value
                                      from the allowed list as documented here.
                      type: array
                      items: 
                        type: string
                        enum: 
                          - sanction
                          - warning  
                          - fitness-probity
                          - pep
                          - pep-class-1
                          - pep-class-2
                          - pep-class-3
                          - pep-class-4
                          - adverse-media
                          - adverse-media-financial-crime
                          - adverse-media-violent-crime
                          - adverse-media-sexual-crime
                          - adverse-media-terrorism
                          - adverse-media-fraud
                          - adverse-media-narcotics
                          - adverse-media-general
                clientRef:
                  type: string
                  description: Your reference for easy link to your records
                  maxLength: 255
                notes:
                  type: string
                  description: |
                    Your own notes to add to this search for future reference. Max length is 1024 characters.
                fuzziness:
                  description: |
                                  Determines how closely the returned results must match 
                                  the supplied name. Overridden by exact_match parameter
                                  setting in this request
                  type: number
                  format: float
                  minimum: 0.0
                  maximum: 1.0
                tags:
                  description: |
                    An array of three custom tags labelled Tag1, Tag2 and Tag 3, Just insert whatever 
                    the value you want in that sequence to assign the first value to tag 1, the second value 
                    to tag 3 and \the third value in the list to tag 3, Any or all tags  can be left empty 
                  type: array
                  items:
                    type: string

              
              
              example:
                searchTerm: Jesse Pinkman
                filters:
                  birthYear: '1980'
                  countryCodes:
                    - US
                    - CA
                  types:
                    - sanction
                    - warning
                    - fitness-probity
                    - pep
                    - pep-class-1
                    - pep-class-2
                    - pep-class-3
                    - pep-class-4
                    - adverse-media
                    - adverse-media-financial-crime
                    - adverse-media-violent-crime
                    - adverse-media-sexual-crime
                    - adverse-media-terrorism
                    - adverse-media-fraud
                    - adverse-media-narcotics
                    - adverse-media-general
                clientRef: '1234567890'
                notes: This is an optional note for your records.
                fuzziness: 0.6
                tags:
                  - String to assign to Tag 1
                  - String to assign to Tag 2
                  - String to assign to Tag 3
      
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: True if the token was generated successfully. False otherwise
                  data:
                    type: object
                    description: In case of an error, this object will be set to 'null'
                    properties:
                      ID:
                        type: string
                        description: The unique search ID is generated automatically
                      totalHits: 
                        type: integer
                        description: total number of hits
                      matchStatus:
                        type: string
                        description: Set to "potential_match" if totalHits value is more than 0. set to "No_Match" if totalHits is 0
                  errors:
                    type: object
                    description: Array of error object types. If the request was successful, this object will be set to 'null'
                    properties: 
                      code:
                        type: integer
                        description: The HTML error reason code. Includes 400 (bad request), 401 (Unauthorized)
                      message:
                        type: string
                        description: A descriptive message describing the reason for the error
                      type:
                        type: string
                        description: Error types such as "BAD_REQUEST_ERROR", "UNAUTHORIZED_ERROR"
              example:
                success: true
                data:
                  id: unique_id
                  totalHits: 9
                  matchStatus: potential_match
                errors: null

        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Set to false if not successful
                  data:
                    type: object
                    properties:
                      ID:
                        type: string
                        description: The unique search ID is generated automatically
                      totalHits: 
                        type: integer
                        description: total number of hits
                      matchStatus:
                        type: string
                        description: Set to "potential_match" if totalHits value is more than 0. Set to "No_Match" if totalHits is 0
                  errors:
                    type: object
                    properties: 
                      code: 
                        type: integer
                        description: Http error code
                      message:
                        type: string
                        description: error message
                      type:
                        type: string
                        description: http status code

              example:
                success: false
                data: null
                errors:
                  code: 400
                  message: unknown field search term
                  type: BAD_REQUEST_ERROR
                  
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Set to false if not successful
                  data:
                    type: object
                    properties:
                      ID:
                        type: string
                        description: The unique search ID is generated automatically
                      totalHits: 
                        type: integer
                        description: total number of hits
                      matchStatus:
                        type: string
                        description: Set to "potential_match" if totalHits value is more than 0. Set to "No_Match" if totalHits is 0
                  errors:
                    type: object
                    properties: 
                      code: 
                        type: integer
                        description: Http error code
                      message:
                        type: string
                        description: error message
                      type:
                        type: string
                        description: http status code

              example:
                success: false
                data: null
                errors:
                  code: 401
                  message: unauthorized
                  type: UNAUTHORiZED
                  


  /v1/aml/search/monitor:
    post:
      tags:
        - aml
      summary: Monitor
      description: |
        Switch 'ON' or 'OFF' the monitoring on a specific search. By default, all 
        searches are automatically monitored. This means that you should run this
        endpoint to switch off a search from continuous monitoring.
      security:
        - bearerAuth: [] 
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: 
                  type: string
                  description: The search ID returned in the ID field of the response to a Search call
                isMonitored:
                  type: boolean
                  description: Set to 'true' if you want to monitor this search. Set to 'false' if you want to stop monitoring 
              example:
                id: unique_id
                isMonitored: false 

      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: true if successful, false if unsuccessful
                  data:
                    type: string
                    description: the content of the response 
                  errors:
                    type: object
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                      type:
                        type: string
            
              example:
                success: true
                data: null
                errors: null

        '400':
          description: Invalid ID - ID does not exist
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: true if successful, false if unsuccessful
                  data:
                    type: string
                    description: the content of the response 
                  errors:
                    type: object
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
                      type:
                        type: string
            
              example:
                success: false
                data: null
                errors:
                  code: 400
                  message: id - Value must be a valid bson object ID
                  type: BAD_REQUEST_ERROR
      
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Set to false if not successful
                  data:
                    type: object
                    properties:
                      ID:
                        type: string
                        description: The unique search ID is generated automatically
                      totalHits: 
                        type: integer
                        description: total number of hits
                      matchStatus:
                        type: string
                        description: Set to "potential_match" if totalHits value is more than 0. set to "No_Match" if totalHits is 0
                  errors:
                    type: object
                    properties: 
                      code: 
                        type: integer
                        description: Http error code
                      message:
                        type: string
                        description: error message
                      type:
                        type: string
                        description: http status code

              example:
                success: false
                data: null
                errors:
                  code: 401
                  message: unauthorized
                  type: ACCESS_DENIED

  /v1/cfm/case/init/:
    post:
      tags:
        - cfm
      summary: Initiate a new case via the CFM.
      description: |
        Designed to initiate a customer onboarding session via our CFM component. Make the call from your onboarding webpage after collecting basic personal details 
        from an applicant. To make the call you will need to first get a valid caseTypeId which you can retrieve via the `/v1/cfm/case/types` endpoint. You may
        ask our applicant to select a product or service linked to the case type created in QGoL or assume it automatically based on the link the applicant used. 
        A successful request will create a new Case Summary containing the Personal Entity with the personal details you submitted. We will return the `CaseId`, the `entityId`
        and especially a URL link where the session with the requested CFM flow is hosted. 
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                caseTypeId:
                  type: string
                  description: A valid value as returned from the `/v1/cfm/case/types` endpoint. Case Types are created in QGen Online via the UI.
                  example: "unique_id"
                referenceId:
                  type: string
                  description: A unique reference to your applicant. Make sure this was never submitted before and does not already exist in QGoL.
                  example: "testreference3"
                description:
                  type: string
                  description: Free text you can submit with the application. Will be visible in the notes field in the Case Summary.
                  example: "This is the description field"
                email:
                  type: string
                  format: email
                  description: Applicant email. We validate this and can reject a request if this is not a valid email structure. At least one of email or mobile is required.
                  example: "bobsmith@example.com"
                mobile:
                  type: string
                  pattern: '^\+[1-9]\d{1,14}$'
                  description: Applicant valid mobile number with country code.
                  example: "+35679000000"
                title:
                  type: string
                  enum: [Mr, Mrs, Ms, Dr, Miss]
                  description: The title before an applicant's name, limited to the specified prefixes.
                  example: "Mr"
                firstName:
                  type: string
                  description: Applicant's first name. Required.
                  example: "Abraham"
                lastName:
                  type: string
                  description: Applicant's last name. Required.
                  example: "Murray"
                legalName:
                  type: string
                  description: Optional field if the applicant has a legal name different from their known by names.
                  example: "Abraham Murray"
                countryCode:
                  type: string
                  description: Locality of applicant. Use ISO 3166-1 alpha-2 strings format.
                  example: "MT"
                locale:
                  type: string
                  description: Language preference of the applicant. Defaults to English if unspecified or unsupported.
                  example: "MT"
                gender:
                  type: string
                  enum: [Male, Female, Non-Binary, Prefer not to say]
                  description: Gender of the applicant.
                  example: "Male"
                dateOfBirth: 
                  type: string
                  format: date
                  description: Date of birth of applicant in YYYY-MM-DD format.
                  example: "1975-06-12"
                placeOfBirth:
                  type: string
                  description: Birthplace of the applicant.
                  example: "London"
                countryOfBirth:
                  type: string
                  description: Country of birth of the applicant, using ISO 3166-1 alpha-2 format.
                  example: "United Kingdom"
                addressLine1:
                  type: string
                  description: Primary address line for the applicant.
                  example: "House Name"
                addressLine2:
                  type: string
                  description: Secondary address line for the applicant.
                  example: "New Road"
                postCode:
                  type: string
                  description: Postal code for the applicant's address.
                  example: "SLM1024"
                country:
                  type: string
                  description: Country of the applicant, using ISO 3166-1 alpha-2 format.
                  example: "MT"
                nationality:
                  type: string
                  description: The nationality of the applicant.
              required:
                  - firstName
                  - lastName

            examples:
              InitCaseExample:
                summary: Example request to initiate a new case
                value:
                  caseTypeId: "unique_id"
                  referenceId: "UniqueReferenceABCD01"
                  description: "This is the description field"
                  email: "test@arritech.com"
                  mobile: "+35679000000"
                  title: "Mr"
                  firstName: "Abraham"
                  lastName: "Murray"
                  legalName: ""
                  countryCode: "MT"
                  locale: "EN"
                  gender: "Male"
                  dateOfBirth: "1986-12-12"
                  placeOfBirth: ""
                  countryOfBirth: "MT"
                  addressLine1: ""
                  addressLine2: ""
                  postCode: ""
                  country: "MT"
                  nationality: "Maltese"
      
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: True if the token was generated successfully. False otherwise
                  data:
                    type: object
                    description: In case of an error, this object will be set to 'null'
                    properties:
                      caseId:
                        type: string
                        description: The unique search ID is generated automatically
                      entityId: 
                        type: integer
                        description: total number of hits
                      journeyId:
                        type: string
                        description: Set to "potential_match" if totalHits value is more than 0. set to "No_Match" if totalHits is 0
                      sessionID:
                        type: string
                        description: the unique session id that makes the CFM url unique. This session expires as per setting in QGoL General settings. Should be returned to the frontend to start cfm process.
                      cfmUrl:
                        type: string
                        description: the URL with the unique session id that makes the CFM url unique.                        
                  errors:
                    type: object
                    description: Array of error object types. If the request was successful, this object will be set to 'null'
                    properties: 
                      code:
                        type: integer
                        description: The HTML error reason code. Includes 400 (bad request), 401 (Unauthorized)
                      message:
                        type: string
                        description: A descriptive message describing the reason for the error
                      type:
                        type: string
                        description: Error types such as "BAD_REQUEST_ERROR", "UNAUTHORIZED_ERROR"
              example:
                success: true
                data:
                  caseId: unique_id
                  entityId: unique_id
                  journeyId: unique_id
                  sessionId: unique_id
                  cfmUrl: https://qgenonlinestaging.com/cfm/?session_id=unique_id
                errors: null
        '400': 
          description: Bad request
          content: 
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: Set to false if not successful
                  data:
                    type: object
                  errors:
                    type: object
                    properties: 
                      code: 
                        type: integer
                        description: Http error code
                      message:
                        type: string
                        description: error message
                      type:
                        type: string
                        description: http status code
              example:
                success: false
                data: null
                errors:
                  code: 400
                  message: invalid character '\\n' in string literal
                  type: BAD_REQUEST_ERROR
          
  /v1/cfm/case/types:
    get:
      tags:
        - cfm
      summary: Retrieve available case types.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: An array of case types with id, name, group, and riskLevel.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CaseType'
  /v1/case/case/{caseID}:
    get:
      tags:
        - cfm
      summary: Get detailed information about a specific case by its ID.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: caseID
          required: true
          schema:
            type: string
          description: The ID of the case to retrieve.
      responses:
        '200':
          description: Raw JSON containing detailed case information.
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
              examples:
                caseDetailsExample:
                  value: {
                    "success": true,
                    "data": {
                      "audit": {
                        "createdBy": {
                          "actorId": "unique_id",
                          "actorType": "Api",
                          "timestamp": "2024-03-13T16:23:48.158Z"
                        },
                        "deletedBy": null,
                        "modifiedBy": null,
                        "revisionID": 1
                      },
                      "casePriority": {
                        "id": "unique_id",
                        "name": "Medium"
                      },
                      "caseStatus": {
                        "id": "unique_id",
                        "name": "New"
                      },
                      "caseType": {
                        "id": "unique_id",
                        "name": "eCommerce"
                      },
                      "companies": [],
                      "description": "",
                      "id": "unique_id",
                      "persons": [
                        {
                          "addressLine1": "",
                          "addressLine2": "",
                          "audit": {
                            "createdBy": {
                              "actorId": "unique_id",
                              "actorType": "Api",
                              "timestamp": "2024-03-13T16:23:48.165Z"
                            },
                            "deletedBy": null,
                            "modifiedBy": null,
                            "revisionID": 1
                          },
                          "country": "",
                          "dob": "",
                          "documents": [],
                          "emailAddress": "",
                          "gender": "",
                          "id": "unique_id",
                          "name": "lawliet",
                          "nationality": "",
                          "phoneNum": "+35677709206",
                          "postCode": "",
                          "searches": [],
                          "surname": "sebastian",
                          "title": ""
                        }
                      ],
                      "reference": "unique_id",
                      "summary": "no summary"
                    },
                    "errors": null
                  }
        '400':
            description: Bad Request - Invalid input parameters.
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                    data:
                      type: 'object'
                    errors:
                      type: array
                      items:
                        type: object
                        properties:
                          code:
                            type: integer
                            format: int32
                          message:
                            type: string
                          type:
                            type: string
                examples:
                  badRequestExample:
                    value: {
                      "success": false,
                      "data": null,
                      "errors": [
                        {
                          "code": 400,
                          "message": "caseId - Value must be a valid bson object ID",
                          "type": "BAD_REQUEST_ERROR"
                        }
                      ]
                    }


  /v1/cfm/webhook/logs/{sessionID}:
    get:
      tags:
        - cfm
      summary: Retrieve webhook logs for a given session ID.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: sessionID
          required: true
          schema:
            type: string
          description: The ID of the session to retrieve.
      responses:
        '200':
          description: Raw JSON message containing the webhook logs.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      logs:
                        type: array
                  errors:
                    type: 'object'
              examples:
                webhookLogsExample:
                  value: {
                    "success": true,
                    "data": {
                      "logs": [
                        {
                          "ID": "unique_id",
                          "merchantID": "unique_id",
                          "referenceID": "unique_id",
                          "sessionID": "unique_id",
                          "riskLevelID": "unique_id",
                          "journeyID": "unique_id",
                          "caseID": "unique_id",
                          "entityID": "unique_id",
                          "caseTypeID": "unique_id",
                          "webhookID": "unique_id",
                          "locale": "EN",
                          "eventType": "cfm_case_created_event",
                          "payload": {
                            "caseID": "unique_id",
                            "caseTypeID": "unique_id",
                            "entityID": "unique_id",
                            "journeyID": "unique_id",
                            "locale": "EN",
                            "merchantID": "unique_id",
                            "referenceID": "unique_id",
                            "riskLevelID": "unique_id",
                            "sessionID": "unique_id"
                          },
                          "endpoint": "https://qgenonlinestaging.com/cfm-simulator-api/v1/webhook/create",
                          "statusCode": 200,
                          "response": "object",
                          "clientErr": null,
                          "status": "Succeed",
                          "createdAt": "2024-03-13T16:23:48.24Z",
                          "modifiedAt": "2024-03-13T16:23:48.279Z"
                        }
                      ]
                    },
                    "errors": null
                  }
        '400':
          description: Bad Request - Invalid input parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: integer
                          format: int32
                        message:
                          type: string
                        type:
                          type: string
              examples:
                invalidSessionIdExample:
                  value: {
                    "success": false,
                    "data": null,
                    "errors": [
                      {
                        "code": 400,
                        "message": "sessionId - Value must be a valid bson object ID",
                        "type": "BAD_REQUEST_ERROR"
                      }
                    ]
                  }